## monofs

- [x] Implement tombstone for deletes.

- [ ] Implement merging although it is a bit tricky.

  - [ ] How do we handle "previous" field conflicts?
  - [ ] Handling deletes with tombstones

- [ ] Fix file size issue.

  - [ ] We should be able to get the file size from a files metadata.
  - [ ] This requires making changes to `IpldStore` and `Layout`.
  - [ ] `IpldStore::get_cid_size(cid: &Cid) -> Result<u64, Error>`?
  - [ ] `Layout::get_cid_size(cid: &Cid) -> Result<u64, Error>`?

- [ ] Children entities should inherit sync type from their parents when they get added.

- [ ] Change MonofsServer `fileid_map` and `path_map` to use LruCache instead of HashMap.

## monoutils-store

- [ ] Implement a content-defined chunker that uses Gear Hashing.

  - [ ] QuickCDC?
  - [ ] Make it the default chunker for stores.

- [ ] Implement `BalancedDagLayout` and make it the default layout for stores.

## monocore

- [x] Fix copy and remove permission issues on Linux.

- [ ] Use sqlitedb for maintaining running services state.

- [ ] Treating microvm management like a package manager.

  - [ ] Store service rootfs, state, logs locally in a .mc directory kind of like ./node_modules.
  - [ ] Store reference rootfses (oci & monofs) in home_dir with a special store that links to them from forked rootfses.

- [ ] Support multiple registries.
  - [x] Use `Reference` type for image_ref where it makes sense: https://docs.rs/oci-spec/0.7.1/oci_spec/distribution/struct.Reference.html
  - [ ] Qualify image names fully where needed. <registry>/<repo>:<tag>
